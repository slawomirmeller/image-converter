# Image to WebP Converter

Desktop application for converting images (JPG, PNG, BMP) to WebP format with optional resizing.

## Features

- Convert JPG, PNG, BMP images to WebP format
- Resize images by specifying the shorter edge (maintains aspect ratio)
- Batch processing of entire directories
- Dark themed modern GUI
- Disk space validation before conversion
- Detailed logging to `./logs/image-converter.log`
- Error summary after batch processing
- WebP quality: 90%

## Requirements

- Java 8 or higher (JDK 17+ recommended for `jpackage`)
- Maven (for building)
- (Optional for MSI) WiX Toolset if you want to produce a .msi installer with `jpackage`

## Building

```bash
mvn clean package
```

> The build creates the application JAR in `target/` (shaded/uber jar).

## Running

```bash
java -jar target/image-converter-1.0.0.jar
```

## Usage

1. Click "Choose Directory" to select a folder containing images
2. Enter the desired size (in pixels) for the shorter edge of the image (optional)
3. Click "Convert" to start the batch conversion
4. View the progress bar and wait for completion
5. Review the summary dialog with conversion results

## Packaging for Windows (builder guide)

This project contains a helper script `build-installer.ps1` that automates creating a portable Windows package (app-image) and a simple installer script (`Install.bat`) which places the app under `C:\Program Files` and creates shortcuts for all users.

Prerequisites to build the installer:
- JDK 14+ (jpackage available; JDK 17+ recommended)
- Maven (to build the JAR)
- Optional: WiX Toolset if you want `jpackage` to create a native `.exe` / `.msi` installer instead of an app-image (jpackage will warn if WiX is missing)

How to build the installer (PowerShell):

```powershell
# Run from project root
cd C:\Users\slawo\IdeaProjects\image-converter
powershell -ExecutionPolicy Bypass -File .\build-installer.ps1
```

What the script does:
- runs `mvn package` to build the application JAR
- creates a jpackage app-image (portable app) and places it into a temporary build directory
- generates `Install.bat` (installer script) and `Uninstall.bat` inside the packaged folder
- creates a ZIP distribution under `dist\ImageToWebPConverter-<version>-Windows.zip`

If you prefer a native MSI/EXE installer generated by `jpackage`, install WiX Toolset and re-run the script (or run `jpackage` manually with `--type exe` / `--type msi`). Add WiX to PATH so jpackage can find `candle.exe` and `light.exe`.

## Distributing the application

After the build script finishes you get a ZIP file in `dist/` (for example `dist\ImageToWebPConverter-1.0.0-Windows.zip`). Distribute that ZIP to users.

Inside the ZIP you'll find a folder `ImageToWebPConverter` containing:
- `ImageToWebPConverter.exe` (launcher created by jpackage when possible)
- `app/` (the application files including the JAR)
- `runtime/` (bundled JRE produced by jpackage)
- `Install.bat` (simple installer that copies the app to `C:\Program Files` and creates shortcuts)

## Installation on Windows (for end users)

1. Download and extract the ZIP archive provided by the developer.
2. Open the extracted folder, locate `Install.bat`.
3. Right-click `Install.bat` and select **Run as administrator** (installation copies files to `C:\Program Files` and creates Start Menu / Desktop shortcuts for all users).

After installation you should find the app in:
- Start Menu → `Image Tools` → `Image to WebP Converter`
- Desktop shortcut: `Image to WebP Converter` (if chosen by installer)

To uninstall the application run the generated uninstaller in the application folder (by default):

```
C:\Program Files\ImageToWebPConverter\Uninstall.bat
```

## Notes & troubleshooting

- If `build-installer.ps1` fails at the `jpackage --type exe` step with a message about WiX (`Cannot find WiX tools`), either install WiX Toolset (https://wixtoolset.org/) and add it to PATH or let the script create an *app-image* (portable distribution) which does not require WiX.
- The distributed package includes a bundled Java runtime so end users do not need to have Java pre-installed.
- If you encounter long recursive folders created previously by jpackage in `target/installer`, delete the `target` directory before rebuilding. On Windows long-path issues sometimes require using an external temporary directory for jpackage (the provided build script already uses a safe temporary build location).

## Notes

- Original files are preserved
- WebP files are saved in the same directory with the same name
- Existing WebP files will be overwritten
- Only files in the selected directory are processed (no subdirectories)


---

*If you want, I can also add a small 'How to create MSI with WiX' section or embed an MSI build step into the PowerShell script.*
